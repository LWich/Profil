import{u as U,r as s,j as e,b as z}from"./index-BDHAM68H.js";const G=()=>{const{apiEndpoints:n}=U(),[u,v]=s.useState([]),[S,l]=s.useState(!0),[h,d]=s.useState(""),[p,C]=s.useState(null),[x,k]=s.useState(null),[y,c]=s.useState(n.product),[w,I]=s.useState(0),[g,F]=s.useState(0),[m,f]=s.useState(1),[o,T]=s.useState({}),[i,A]=s.useState({field:"name",order:"asc"}),j=async t=>{const r=localStorage.getItem("authToken");if(!r){d("Authentication token not found"),l(!1);return}if(!t){d("API endpoint not found"),l(!1);return}try{const a=await z.get(t,{headers:{Authorization:`Bearer ${r}`},params:{...o,sort:i.field,order:i.order}});if(a.data&&a.data.results){v(a.data.results),C(a.data.links.next),k(a.data.links.previous),I(a.data.count),F(a.data.total_pages);const P=new URLSearchParams(new URL(t).search);f(P.get("page")?parseInt(P.get("page")):1)}else d("Invalid data format");l(!1)}catch(a){console.error(a),d("Failed to fetch table data"),l(!1)}};s.useEffect(()=>{j(y)},[y,i,n]);const D=()=>{p&&c(p)},E=()=>{x&&c(x)},L=t=>{f(t.target.value)},R=t=>{t.preventDefault();const r=parseInt(m,10);r>0&&r<=g&&c(`${n.product}?page=${r}`)},b=t=>{T({...o,[t.target.name]:t.target.value})},_=t=>{A({field:t,order:i.order==="asc"?"desc":"asc"})},$=()=>{c(n.product),j(n.product)};if(S)return e.jsx("div",{children:"Loading..."});if(h)return e.jsx("div",{children:h});if(u.length===0)return e.jsx("div",{children:"No data available"});const N=Object.keys(u[0]),O=t=>t==null?"":typeof t=="object"?JSON.stringify(t):t.toString();return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Table: Product"}),e.jsxs("p",{className:"mb-4",children:["Total Records: ",w," | Total Pages: ",g," | Current Page: ",m]}),e.jsxs("div",{className:"flex mb-4 space-x-4",children:[e.jsx("input",{type:"text",name:"name",placeholder:"Filter by name",value:o.name||"",onChange:b,className:"px-4 py-2 border border-gray-300 rounded"}),e.jsx("input",{type:"text",name:"synonyms",placeholder:"Filter by synonyms",value:o.synonyms||"",onChange:b,className:"px-4 py-2 border border-gray-300 rounded"}),e.jsx("input",{type:"text",name:"linked_id",placeholder:"Filter by linked ID",value:o.linked_id||"",onChange:b,className:"px-4 py-2 border border-gray-300 rounded"}),e.jsx("button",{onClick:$,className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Apply Filters"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[e.jsx("thead",{children:e.jsx("tr",{children:N.map(t=>e.jsx("th",{onClick:()=>_(t),className:"px-4 py-2 border-b border-gray-200 bg-gray-100 text-left text-sm font-medium text-gray-700 cursor-pointer",children:t},t))})}),e.jsx("tbody",{children:u.map((t,r)=>e.jsx("tr",{className:"odd:bg-white even:bg-gray-50",children:N.map(a=>e.jsx("td",{className:"px-4 py-2 border-b border-gray-200 text-sm text-gray-700",children:O(t[a])},a))},r))})]})}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsx("button",{onClick:E,disabled:!x,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded disabled:opacity-50",children:"Previous"}),e.jsxs("form",{onSubmit:R,className:"flex items-center",children:[e.jsx("input",{type:"number",value:m,onChange:L,className:"px-4 py-2 border border-gray-300 rounded",min:"1",max:g}),e.jsx("button",{type:"submit",className:"ml-2 px-4 py-2 bg-blue-500 text-white rounded",children:"Go"})]}),e.jsx("button",{onClick:D,disabled:!p,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded disabled:opacity-50",children:"Next"})]})]})};export{G as default};
